<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>校验结果</title>
  <meta name="robots" content="noindex,nofollow" />
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans","PingFang SC","Microsoft YaHei";margin:0;background:#fafafa;color:#111}
    .wrap{max-width:720px;margin:0 auto;padding:28px 18px}
    .card{background:#fff;border:1px solid #eee;border-radius:14px;padding:22px;box-shadow:0 1px 10px rgba(0,0,0,.03)}
    h1{font-size:20px;margin:0 0 10px}
    .tag{display:inline-block;font-size:12px;padding:4px 10px;border-radius:999px;background:#f2f2f2;color:#333;margin:6px 0 14px}
    .p{line-height:1.75;font-size:15px;margin:10px 0}
    .small{color:#666;font-size:13px;line-height:1.6;margin-top:14px}
    .hr{height:1px;background:#eee;margin:16px 0}
    button{border:1px solid #ddd;background:#fff;border-radius:10px;padding:10px 12px;font-size:14px;cursor:pointer}
    button:active{transform:translateY(1px)}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    code{background:#f4f4f5;padding:2px 6px;border-radius:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1 id="mainTitle">已识别到高风险决策结构</h1>
      <div class="tag" id="subTitle"></div>
      <div class="tag" id="modeTag">mode=</div>

      <div id="content"></div>

      <div class="hr"></div>

      <div class="small" id="footer">
        本页为系统自动输出，目的仅为“是否继续投入”的风险校准。此处不提供建议、不解释、不对结果负责。
      </div>

      <div class="btns">
        <button id="copyBtn">复制结果编号</button>
        <button id="closeBtn">关闭本页</button>
      </div>

      <div class="small" id="debug" style="display:none;"></div>
    </div>
  </div>

  <script>
    // 读取 URL 参数
    const params = new URLSearchParams(location.search);
    const mode = (params.get("mode") || "unknown").trim();
    const token = (params.get("t") || params.get("token") || "").trim(); // 可选：将来你要透传也有位

    // 文案库（先给最小可用壳子，你后面可以把每段替换成你的正式文案）
const LIB = {
  M1: {
    label: "M1｜状态驱动型",
    body: `
      <div class="p"><b>系统识别到的信号：</b><br>
      当前决策中，存在由情绪缓解、关系压力或自我证明需求主导判断的迹象。</div>

      <div class="p"><b>系统提示：</b><br>
      在当前状态下继续推进该决策，出现不可逆后果或长期负担的风险较高。
      是否继续，建议先重新核对现实约束（资金 / 时间 / 关系 / 可撤回性）。</div>

      <div class="p"><b>断裂式结束：</b><br>
      本系统不提供解释与替代方案。</div>
    `
  },

  M2: {
    label: "M2｜信息不足型",
    body: `
      <div class="p"><b>系统识别到的信号：</b><br>
      当前决策依赖的关键信息不足，部分判断建立在假设或未验证条件之上。</div>

      <div class="p"><b>系统提示：</b><br>
      在信息未充分确认前继续推进，误判风险较高。
      是否继续，建议先补齐对结果影响最大的关键事实。</div>

      <div class="p"><b>断裂式结束：</b><br>
      本系统不提供信息获取路径与决策建议。</div>
    `
  },

  M3: {
    label: "M3｜资源失衡型",
    body: `
      <div class="p"><b>系统识别到的信号：</b><br>
      当前决策在时间、精力或责任分配上存在持续性失衡迹象。</div>

      <div class="p"><b>系统提示：</b><br>
      在资源结构未校准前继续推进，可能对其他重要领域造成连锁影响。
      是否继续，建议先评估长期可承受性。</div>

      <div class="p"><b>断裂式结束：</b><br>
      本系统不提供资源分配或执行方案。</div>
    `
  },

  M4: {
    label: "M4｜高不可逆型",
    body: `
      <div class="p"><b>系统识别到的信号：</b><br>
      该决策一旦启动，存在较高的不可逆特征，退出或修正成本较大。</div>

      <div class="p"><b>系统提示：</b><br>
      在缺乏清晰撤回边界的情况下继续推进，可能放大单次判断失误的影响。
      是否继续，建议先明确失败成本。</div>

      <div class="p"><b>断裂式结束：</b><br>
      本系统不对后果承担责任。</div>
    `
  },

  M5: {
    label: "M5｜复杂耦合型",
    body: `
      <div class="p"><b>系统识别到的信号：</b><br>
      当前决策涉及变量较多，因果链条较长，反馈不足以支撑稳定判断。</div>

      <div class="p"><b>系统提示：</b><br>
      在复杂度未压缩前继续推进，结果波动性较高。
      是否继续，建议先降低复杂度或拆分决策单元。</div>

      <div class="p"><b>断裂式结束：</b><br>
      本系统不提供复杂性管理方案。</div>
    `
  },

  pass: {
    label: "PASS｜未识别到显著高风险结构",
    body: `
      <div class="p"><b>系统识别到的信号：</b><br>
      当前决策未触发明显的高风险决策结构特征。</div>

      <div class="p"><b>系统提示：</b><br>
      这不代表结果可控，仅表示未识别到需要立即刹车的结构性风险。
      是否继续，由你自行判断。</div>

      <div class="p"><b>断裂式结束：</b><br>
      本系统不对后续结果负责。</div>
    `
  },
      unknown: {
        title: "无法识别的结果编号",
        body: `
          <div class="p">未识别到 <code>mode</code> 参数。</div>
          <div class="p">请使用形如：<code>/r/?mode=M1</code> 或 <code>/r/?mode=pass</code> 的链接。</div>
        `
      }
    };

    const data = LIB[mode] || LIB.unknown;

    // 渲染
    document.getElementById("subTitle").innerText = data.title;
    document.getElementById("modeTag").innerText = "mode=" + mode;
    document.getElementById("content").innerHTML = data.body;

    // 复制按钮：只复制结果编号（断裂式结束，不复制长文）
    document.getElementById("copyBtn").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(mode);
        document.getElementById("copyBtn").innerText = "已复制：" + mode;
        setTimeout(()=>document.getElementById("copyBtn").innerText="复制结果编号", 1200);
      } catch(e) {
        alert("复制失败，你可以手动复制： " + mode);
      }
    });

    // 关闭按钮：尽量关闭；关不了就返回上一页
    document.getElementById("closeBtn").addEventListener("click", () => {
      window.close();
      setTimeout(()=>history.back(), 150);
    });

    // 可选调试信息（默认隐藏）
    // document.getElementById("debug").style.display = "block";
    // document.getElementById("debug").innerText = `token=${token || "(空)"}`;
  </script>
</body>
</html>
